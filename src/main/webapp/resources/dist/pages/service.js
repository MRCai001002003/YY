define(["require"],function(e){return function(e){e.service("cache",function(){var e={};this.set=function(t,n){e[t]=n},this.get=function(t){return e[t]}}),e.factory("validatePattern",function(){return{bankCard:function(t){if(t.length<14||t.length>19)return!1;var n=/^\d*$/;if(!n.exec(t))return!1;var r="10,18,30,35,36,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99";if(r.indexOf(t.substring(0,2))==-1)return!1;var i=t.substr(t.length-1,1),s=t.substr(0,t.length-1),o=new Array;for(var u=s.length-1;u>-1;u--)o.push(s.substr(u,1));var a=[],f=[],l=new Array;for(var c=0;c<o.length;c++)(c+1)%2==1?parseInt(o[c])*2<9?a.push(parseInt(o[c])*2):f.push(parseInt(o[c])*2):l.push(o[c]);var h=[],p=[];for(var d=0;d<f.length;d++)h.push(parseInt(f[d])%10),p.push(parseInt(f[d])/10);var v=0,m=0,g=0,y=0,b=0;for(var w=0;w<a.length;w++)v+=parseInt(a[w]);for(var E=0;E<l.length;E++)m+=parseInt(l[E]);for(var S=0;S<h.length;S++)g+=parseInt(h[S]),y+=parseInt(p[S]);b=parseInt(v)+parseInt(m)+parseInt(g)+parseInt(y);var x=parseInt(b)%10==0?10:parseInt(b)%10,T=10-x;return i==T?!0:!1},idcard:function(e){function r(e){e=u(e.replace(/ /g,""));if(e.length==15)return o(e);if(e.length==18){var t=e.split("");return s(e)&&i(t)?!0:!1}return!1}function i(e){var r=0;e[17].toLowerCase()=="x"&&(e[17]=10);for(var i=0;i<17;i++)r+=t[i]*e[i];return valCodePosition=r%11,e[17]==n[valCodePosition]?!0:!1}function s(e){var t=e.substring(6,10),n=e.substring(10,12),r=e.substring(12,14),i=new Date(t,parseFloat(n)-1,parseFloat(r));return i.getFullYear()!=parseFloat(t)||i.getMonth()!=parseFloat(n)-1||i.getDate()!=parseFloat(r)?!1:!0}function o(e){var t=e.substring(6,8),n=e.substring(8,10),r=e.substring(10,12),i=new Date(t,parseFloat(n)-1,parseFloat(r));return i.getYear()!=parseFloat(t)||i.getMonth()!=parseFloat(n)-1||i.getDate()!=parseFloat(r)?!1:!0}function u(e){return e.replace(/(^\s*)|(\s*$)/g,"")}var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],n=[1,0,10,9,8,7,6,5,4,3,2];return r(e)}}}),e.factory("logoutInterceptor",["$q",function(e){var t=document.getElementById("progress-bar"),n={request:function(e){return t.style.display="block",e},response:function(e){return t.style.display="none",typeof e.data=="object"&&/login failed/.test(e.data.msg)?(location.replace("#/userLogin"),{}):e},requestError:function(t){return e.reject(t)},responseError:function(e){return e}};return n}])}});
