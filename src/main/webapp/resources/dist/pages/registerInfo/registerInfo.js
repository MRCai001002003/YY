define(["require","../../common/js/baseUrl/baseUrl"],function(e){var t=e("../../common/js/baseUrl/baseUrl");return function(e){e.controller("registerInfoControl",["$scope","$http","$state",function(e,n,r){var i=["@qq.com","@163.com","@126.com","@139.com","@sina.com","@hotmail.com","@aliyun.com","@sohu.com"];e.params={},e.isShowSuffix=!1,e.emailList=i,e.isEmail=!0,e.addSuffix=function(t){e.params.email+=t,e.isShowSuffix=!1,e.isEmail=!0},e.testSuffix=function(t){if(!t){e.isShowSuffix=!1;return}var n=(t||"").indexOf("@");if(n==-1)e.emailList=i,e.isShowSuffix=!0;else{var r=[],s=new RegExp("^"+t.substring(n,t.length));i.forEach(function(e){s.test(e)&&r.push(e.replace(s,""))}),e.emailList=r,e.isShowSuffix=!!r.length}},e.submit=function(){if(!/^[^\s@]+@[^\s@]+\.\S+$/.test(e.params.email)){e.isEmail=!1;return}n({url:t+"customer/saveOrUpdateCustomerPersonal",method:"post",data:e.params}).success(function(e){e.success?r.go("registed"):alert(e.msg)})}}])}});
